<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Make it work as a home screen app -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Marathon Tracker">
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Marathon Training Plan | Sub-3:35</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Crimson+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            user-select: none;
        }
        
        textarea {
            -webkit-user-select: text;
            user-select: text;
        }

        :root {
            --primary: #1a1a2e;
            --accent: #ff6b6b;
            --success: #4ecdc4;
            --warning: #ffe66d;
            --phase1: #6c5ce7;
            --phase2: #fd79a8;
            --phase3: #00b894;
            --taper: #fdcb6e;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #2d3436;
            --text-light: #636e72;
            --border: #dfe6e9;
        }

        body {
            font-family: 'Crimson Pro', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text);
            line-height: 1.6;
            padding: 2rem 1rem;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #16213e 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><rect fill="%23ffffff" fill-opacity="0.03" width="50" height="50"/><rect fill="%23ffffff" fill-opacity="0.03" x="50" y="50" width="50" height="50"/></svg>');
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        h1 {
            font-family: 'Space Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            letter-spacing: -1px;
            text-transform: uppercase;
        }

        .goal {
            font-size: 1.5rem;
            color: var(--success);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .dates {
            font-size: 1.1rem;
            opacity: 0.9;
            font-family: 'Space Mono', monospace;
        }

        .content {
            padding: 2rem;
        }

        .phase-section {
            margin-bottom: 3rem;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .phase-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--border);
        }

        .phase-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            flex-shrink: 0;
        }

        .phase1 .phase-icon { background: var(--phase1); }
        .phase2 .phase-icon { background: var(--phase2); }
        .phase3 .phase-icon { background: var(--phase3); }
        .taper .phase-icon { background: var(--taper); }

        .phase-title {
            font-family: 'Space Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .week-card {
            background: var(--card);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border-left: 5px solid var(--border);
            transition: all 0.3s ease;
        }
        
        .week-card.collapsed {
            padding: 1rem 1.5rem;
        }
        
        .week-card.collapsed .days-grid,
        .week-card.collapsed .week-focus {
            display: none;
        }

        .week-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }

        .phase1 .week-card { border-left-color: var(--phase1); }
        .phase2 .week-card { border-left-color: var(--phase2); }
        .phase3 .week-card { border-left-color: var(--phase3); }
        .taper .week-card { border-left-color: var(--taper); }

        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
            cursor: pointer;
            user-select: none;
        }
        
        .week-card.collapsed .week-header {
            margin-bottom: 0;
            padding-bottom: 0.5rem;
        }
        
        .week-header:hover {
            opacity: 0.8;
        }
        
        .week-title-wrapper {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .week-compliance {
            font-size: 0.85em;
            font-weight: 600;
            color: #6b7280;
            display: none;
            font-family: 'Crimson Pro', serif;
        }
        
        .week-card.collapsed .week-compliance {
            display: block;
        }
        
        .week-compliance.good {
            color: #059669;
        }
        
        .week-compliance.average {
            color: #d97706;
        }
        
        .week-compliance.poor {
            color: #dc2626;
        }
        
        .collapse-indicator {
            font-size: 0.8em;
            color: #9ca3af;
            margin-left: 8px;
            transition: transform 0.3s ease;
        }
        
        .week-card.collapsed .collapse-indicator {
            transform: rotate(-90deg);
        }

        .week-title {
            font-family: 'Space Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .week-total {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .days-grid {
            display: grid;
            gap: 0.75rem;
        }

        .day-row {
            display: grid;
            grid-template-columns: 40px 110px 40px 90px 80px 100px 1fr 120px 100px;
            gap: 0.5rem;
            align-items: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 12px;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .workout-card {
            position: relative;
        }
        
        .miss-btn {
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 2;
            background: white;
            border: 2px solid #ccc;
            border-radius: 6px;
            color: transparent;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .miss-btn:hover {
            border-color: #ef4444;
            background: #fee;
        }
        
        .miss-btn.active {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }
        
        .checkbox {
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 2;
        }
        
        .day-row.completed {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .day-row.completed .day-name,
        .day-row.completed .day-date,
        .day-row.completed .workout-name,
        .day-row.completed .workout-distance {
            color: white;
        }
        
        /* Golden color for completed long runs */
        .day-row.long-run.completed {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
        }
        
        .day-row.missed {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }
        
        .day-row.missed .day-name,
        .day-row.missed .day-date,
        .day-row.missed .workout-name,
        .day-row.missed .workout-distance {
            color: white;
        }
        
        .day-row.missed::after {
            content: 'MISSED';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: rgba(255, 255, 255, 0.4);
            font-size: 2em;
            pointer-events: none;
            z-index: 1;
        }
        
        /* Ugly brownish-reddish-black for missed long runs */
        .day-row.long-run.missed {
            background: linear-gradient(135deg, #5c2e1f 0%, #3d1e14 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(92, 46, 31, 0.6);
        }
        
        .checkbox-label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            z-index: 2;
        }
        
        .day-row.completed .checkbox-label,
        .day-row.missed .checkbox-label {
            color: white;
        }
        
        .miss-btn-label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            z-index: 2;
        }
        
        .day-row.completed .miss-btn-label,
        .day-row.missed .miss-btn-label {
            color: white;
        }

        .day-row:hover {
            background: #e9ecef;
        }

        .day-row.rest-day {
            background: #e3f2fd;
        }

        .day-row.long-run {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
        }

        .day-row.race-day {
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
            border: 3px solid #e91e63;
            font-weight: bold;
        }

        .day-row.celebration-day {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border: 3px solid #ffd700;
            font-weight: bold;
        }

        .day-name {
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .day-date {
            font-weight: 600;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .workout-name {
            font-weight: 600;
            color: var(--text);
        }

        .workout-distance {
            text-align: right;
            font-weight: 700;
            color: var(--accent);
            font-size: 1rem;
        }

        .week-focus {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
            border-radius: 12px;
            border-left: 4px solid var(--phase1);
        }

        .focus-label {
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .focus-text {
            color: var(--text);
            line-height: 1.6;
        }

        .race-week {
            border: 3px solid gold;
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
        }

        .summary {
            background: var(--card);
            border-radius: 16px;
            padding: 2rem;
            margin-top: 3rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .summary h3 {
            font-family: 'Space Mono', monospace;
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .summary-item {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
            border-radius: 12px;
        }

        .summary-item h4 {
            font-family: 'Space Mono', monospace;
            color: var(--accent);
            margin-bottom: 0.5rem;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .summary-item p {
            color: var(--text);
            line-height: 1.6;
            font-size: 1rem;
        }
        
        /* Notes button styles */
        .notes-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            z-index: 2;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }
        
        .notes-btn:hover {
            transform: scale(1.1) rotate(-2deg);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
        }
        
        .notes-btn.has-note {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a69e 100%);
            box-shadow: 0 4px 10px rgba(78, 205, 196, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .notes-section {
            grid-column: 1 / -1;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
            border-radius: 12px;
            margin-top: 0;
            border: 3px solid #667eea;
        }
        
        .notes-section.active {
            max-height: 400px;
            padding: 1.5rem;
            margin-top: 0.75rem;
        }
        
        .notes-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 3px solid #764ba2;
            border-radius: 12px;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            font-size: 1.1rem;
            resize: vertical;
            margin-bottom: 0.75rem;
            background: white;
            color: #2d3436;
        }
        
        .notes-section textarea:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }
        
        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }
        
        .save-btn:hover {
            transform: scale(1.08) rotate(2deg);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
        }
        
        .note-display {
            grid-column: 2 / -1;
            font-size: 1rem;
            color: #667eea;
            font-style: italic;
            padding: 0.75rem;
            display: none;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            font-weight: 600;
            background: linear-gradient(135deg, #e8eaf6 0%, #d1c4e9 100%);
            border-radius: 8px;
            border-left: 4px solid #764ba2;
        }
        
        .note-display.visible {
            display: block;
        }
        
        /* Edit mode styles */
        .edit-mode-btn {
            background: transparent;
            color: var(--text-light);
            border: 1px solid var(--border);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Space Mono', monospace;
            margin-top: 1.5rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .edit-mode-btn:hover {
            background: var(--bg);
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .edit-mode-btn.active {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        body.edit-mode .workout-name,
        body.edit-mode .workout-distance {
            cursor: pointer;
            position: relative;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        body.edit-mode .workout-name:hover,
        body.edit-mode .workout-distance:hover {
            background: rgba(102, 126, 234, 0.1);
            outline: 2px dashed #667eea;
        }
        
        body.edit-mode .workout-name::after,
        body.edit-mode .workout-distance::after {
            content: '‚úèÔ∏è';
            margin-left: 0.5rem;
            font-size: 0.9em;
        }
        
        .workout-name.editing,
        .workout-distance.editing {
            background: white;
            outline: 3px solid #667eea;
            padding: 0.5rem;
        }
        
        .workout-name input,
        .workout-distance input {
            width: 100%;
            border: none;
            background: transparent;
            font: inherit;
            color: inherit;
            padding: 0;
        }
        
        .workout-name input:focus,
        .workout-distance input:focus {
            outline: none;
        }

        @media (max-width: 768px) {
            .day-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üèÉ‚Äç‚ôÇÔ∏è Sub-3:35 Marathon üèÉ‚Äç‚ôÇÔ∏è</h1>
                <div class="goal">Durability + Marathon Pace + Speed</div>
                <div class="dates">Race Day: May 16, 2026 | Tue Easy+Bike ‚Ä¢ Sat Rest ‚Ä¢ Sun Long Run</div>
            </div>
        </div>

        <div class="content">
            
            <!-- PHASE 1: BASE & DURABILITY -->
            <div class="phase-section phase1">
                <div class="phase-header">
                    <div class="phase-icon">üí™</div>
                    <h2 class="phase-title">Phase 1: Base & Durability</h2>
                </div>

                <!-- Week 1 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 1 | Jan 26 ‚Äì Feb 1</div>
                        <div class="week-total">47 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Jan 26</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Jan 27</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Jan 28</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Jan 29</div>
                            <div class="workout-name">Steady (Aerobic) üí®</div>
                            <div class="workout-distance">10 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Jan 30</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Jan 31</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Feb 1</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">16 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Build leg strength + aerobic base. Easy effort, focusing on consistency.</div>
                    </div>
                </div>

                <!-- Week 2 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 2 | Feb 2 ‚Äì Feb 8</div>
                        <div class="week-total">49 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Feb 2</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Feb 3</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Feb 4</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Feb 5</div>
                            <div class="workout-name">Steady (Aerobic) üí®</div>
                            <div class="workout-distance">10 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Feb 6</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Feb 7</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Feb 8</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">18 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Continue building endurance, maintain steady aerobic efforts.</div>
                    </div>
                </div>

                <!-- Week 3 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 3 | Feb 9 ‚Äì Feb 15</div>
                        <div class="week-total">53 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Feb 9</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Feb 10</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Feb 11</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Feb 12</div>
                            <div class="workout-name">Speed: 2km WU, 8-10 √ó 400m @ 10K, 200m jog üî•</div>
                            <div class="workout-distance">12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Feb 13</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Feb 14</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Feb 15</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">20 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">First speed session added! Focus on quick turnover at 10K pace.</div>
                    </div>
                </div>

                <!-- Week 4 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 4 | Feb 16 ‚Äì Feb 22</div>
                        <div class="week-total">57 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Feb 16</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Feb 17</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Feb 18</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Feb 19</div>
                            <div class="workout-name">Steady (Aerobic) üí®</div>
                            <div class="workout-distance">12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Feb 20</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Feb 21</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Feb 22</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">22 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Longest run yet! Build endurance and durability.</div>
                    </div>
                </div>

            </div>

            <!-- PHASE 2: MARATHON BUILD -->
            <div class="phase-section phase2">
                <div class="phase-header">
                    <div class="phase-icon">üéØ</div>
                    <h2 class="phase-title">Phase 2: Marathon Build</h2>
                </div>

                <!-- Week 5 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 5 | Feb 23 ‚Äì Mar 1</div>
                        <div class="week-total">50 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Feb 23</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Feb 24</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Feb 25</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Feb 26</div>
                            <div class="workout-name">3 √ó 4km @ MP üéØ</div>
                            <div class="workout-distance">12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Feb 27</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Feb 28</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Mar 1</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">22 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">First marathon pace workout! Get comfortable at goal pace.</div>
                    </div>
                </div>

                <!-- Week 6 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 6 | Mar 2 ‚Äì Mar 8</div>
                        <div class="week-total">56-58 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Mar 2</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Mar 3</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Mar 4</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Mar 5</div>
                            <div class="workout-name">Threshold Combo: 2km WU, 20min @ Threshold, 5min jog, 5min @ MP, CD üî•</div>
                            <div class="workout-distance">10-12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Mar 6</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Mar 7</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Mar 8</div>
                            <div class="workout-name">26km PROGRESSION: ~10km easy, ~8-10km steady, 6-8km @ MP üî•</div>
                            <div class="workout-distance">26 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Introduce MP work into long run. Practice finishing strong.</div>
                    </div>
                </div>

                <!-- Week 7 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 7 | Mar 9 ‚Äì Mar 15</div>
                        <div class="week-total">61-62 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Mar 9</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Mar 10</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Mar 11</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Mar 12</div>
                            <div class="workout-name">Speed: 2km WU, 6-8 √ó 800m @ HM, 400m jog üî•</div>
                            <div class="workout-distance">12-13 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Mar 13</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Mar 14</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Mar 15</div>
                            <div class="workout-name">Long Easy üèÉ</div>
                            <div class="workout-distance">28 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Speed session at half marathon pace. Building leg turnover.</div>
                    </div>
                </div>

                <!-- Week 8 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 8 | Mar 16 ‚Äì Mar 22</div>
                        <div class="week-total">64-66 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Mar 16</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Mar 17</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Mar 18</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Mar 19</div>
                            <div class="workout-name">3 √ó 4km @ MP üéØ</div>
                            <div class="workout-distance">12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Mar 20</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Mar 21</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Mar 22</div>
                            <div class="workout-name">30km ALTERNATING MP: 6km easy, 4km @ MP, 3km easy, 4km @ MP, 3km easy, 4km @ MP, easy to 30km üî•</div>
                            <div class="workout-distance">30 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Peak long run volume! Practice finishing strong at MP.</div>
                    </div>
                </div>

            </div>

            <!-- PHASE 3: PEAK TRAINING -->
            <div class="phase-section phase3">
                <div class="phase-header">
                    <div class="phase-icon">‚ö°</div>
                    <h2 class="phase-title">Phase 3: Peak Training</h2>
                </div>

                <!-- Week 9 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 9 | Mar 23 ‚Äì Mar 29</div>
                        <div class="week-total">59-60 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Mar 23</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Mar 24</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Mar 25</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Mar 26</div>
                            <div class="workout-name">Speed: 2km WU, 5 √ó 1km @ HM, 400m jog üî•</div>
                            <div class="workout-distance">12-13 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Mar 27</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Mar 28</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Mar 29</div>
                            <div class="workout-name">Easy Recovery üèÉ</div>
                            <div class="workout-distance">26 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Recovery week with speed work. Protect joints while maintaining fitness.</div>
                    </div>
                </div>

                <!-- Week 10 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 10 | Mar 30 ‚Äì Apr 5</div>
                        <div class="week-total">62-64 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Mar 30</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Mar 31</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Apr 1</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Apr 2</div>
                            <div class="workout-name">10km Continuous @ MP üéØ</div>
                            <div class="workout-distance">10 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Apr 3</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Apr 4</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Apr 5</div>
                            <div class="workout-name">28km (Last 6-8km @ MP) üî•</div>
                            <div class="workout-distance">28 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Longer continuous MP effort. Building mental toughness.</div>
                    </div>
                </div>

                <!-- Week 11 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 11 | Apr 6 ‚Äì Apr 12</div>
                        <div class="week-total">70-74 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Apr 6</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Apr 7</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Apr 8</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Apr 9</div>
                            <div class="workout-name">12km Total (6-8km @ MP) üéØ</div>
                            <div class="workout-distance">12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Apr 10</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Apr 11</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Apr 12</div>
                            <div class="workout-name">30-32km PROGRESSION PEAK: ~12-14km easy, ~8-10km steady, 8-10km build to MP üî•üî•</div>
                            <div class="workout-distance">30-32 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">PEAK WEEK! Longest MP effort in long run. You're ready!</div>
                    </div>
                </div>

                <!-- Week 12 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 12 | Apr 13 ‚Äì Apr 19</div>
                        <div class="week-total">64-69 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Apr 13</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Apr 14</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Apr 15</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Apr 16</div>
                            <div class="workout-name">Threshold Combo: 2km WU, 20min @ Threshold, 5min jog, 5min @ MP, 3-4km CD üî•</div>
                            <div class="workout-distance">10-12 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Apr 17</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Apr 18</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Apr 19</div>
                            <div class="workout-name">Long Easy (No MP) üèÉ</div>
                            <div class="workout-distance">26-28 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Longest continuous MP effort! Easy long run for recovery.</div>
                    </div>
                </div>

                <!-- Week 13 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 13 | Apr 20 ‚Äì Apr 26</div>
                        <div class="week-total">47+ km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Apr 20</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Apr 21</div>
                            <div class="workout-name">Easy + Bike üö¥</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">Apr 22</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">Apr 23</div>
                            <div class="workout-name">2 √ó 8km @ MP üéØ</div>
                            <div class="workout-distance">16 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">Apr 24</div>
                            <div class="workout-name">Easy üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">Apr 25</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row race-day">
                            <div class="day-name">SUN</div>
                            <div class="day-date">Apr 26</div>
                            <div class="workout-name">Half Marathon (Controlled Effort) üèÅ</div>
                            <div class="workout-distance">21.1 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Half marathon tune-up race! Run controlled, don't race it.</div>
                    </div>
                </div>

            </div>

            <!-- TAPER PHASE -->
            <div class="phase-section taper">
                <div class="phase-header">
                    <div class="phase-icon">üèÅ</div>
                    <h2 class="phase-title">Taper Phase</h2>
                </div>

                <!-- Week 14 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 14 | Apr 27 ‚Äì May 3</div>
                        <div class="week-total">53-62 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">Apr 27</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">Apr 28</div>
                            <div class="workout-name">Easy + Strides ‚ö°</div>
                            <div class="workout-distance">5-7 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">WED</div>
                            <div class="day-date">Apr 29</div>
                            <div class="workout-name">10km (Last 5km @ MP) üéØ</div>
                            <div class="workout-distance">10 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">THU</div>
                            <div class="day-date">Apr 30</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">FRI</div>
                            <div class="day-date">May 1</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">May 2</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row long-run">
                            <div class="day-name">SUN</div>
                            <div class="day-date">May 3</div>
                            <div class="workout-name">18-20km ALTERNATING MP (LITE): Easy, 2 √ó 3-4km @ MP, easy between üî•</div>
                            <div class="workout-distance">18-20 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Begin taper! Maintain MP sharpness with reduced volume.</div>
                    </div>
                </div>

                <!-- Week 15 -->
                <div class="week-card collapsed">
                    <div class="week-header">
                        <div class="week-title">Week 15 | May 4 ‚Äì May 10</div>
                        <div class="week-total">37-44 km</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row rest-day">
                            <div class="day-name">MON</div>
                            <div class="day-date">May 4</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">May 5</div>
                            <div class="workout-name">Easy + Strides ‚ö°</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">May 6</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">5-7 km</div>
                        </div>
                        <div class="day-row workout-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">May 7</div>
                            <div class="workout-name">8km (2 √ó 3km @ MP) üéØ</div>
                            <div class="workout-distance">8 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">FRI</div>
                            <div class="day-date">May 8</div>
                            <div class="workout-name">Easy Recovery üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">May 9</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">SUN</div>
                            <div class="day-date">May 10</div>
                            <div class="workout-name">Easy üèÉ</div>
                            <div class="workout-distance">12-14 km</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üí° Focus</div>
                        <div class="focus-text">Final MP sharpener. Trust your fitness, legs feeling fresh!</div>
                    </div>
                </div>

                <!-- Week 16 -->
                <div class="week-card race-week collapsed">
                    <div class="week-header">
                        <div class="week-title">‚≠ê RACE WEEK | May 11 ‚Äì May 17 ‚≠ê</div>
                        <div class="week-total">SUB-3:35! üéØ</div>
                    </div>
                    <div class="days-grid">
                        <div class="day-row">
                            <div class="day-name">MON</div>
                            <div class="day-date">May 11</div>
                            <div class="workout-name">Easy Recovery üåø</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">TUE</div>
                            <div class="day-date">May 12</div>
                            <div class="workout-name">Easy üå§Ô∏è</div>
                            <div class="workout-distance">5 km</div>
                        </div>
                        <div class="day-row">
                            <div class="day-name">WED</div>
                            <div class="day-date">May 13</div>
                            <div class="workout-name">6km Shakeout (2km @ MP) üéØ</div>
                            <div class="workout-distance">6 km</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">THU</div>
                            <div class="day-date">May 14</div>
                            <div class="workout-name">Rest or 2-4km Super Easy üòå</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row rest-day">
                            <div class="day-name">FRI</div>
                            <div class="day-date">May 15</div>
                            <div class="workout-name">Rest üí§</div>
                            <div class="workout-distance">‚Äî</div>
                        </div>
                        <div class="day-row race-day">
                            <div class="day-name">SAT</div>
                            <div class="day-date">May 16</div>
                            <div class="workout-name">üèÅ RACE DAY - MARATHON üèÅ</div>
                            <div class="workout-distance">42.2 km</div>
                        </div>
                        <div class="day-row celebration-day">
                            <div class="day-name">SUN</div>
                            <div class="day-date">May 17</div>
                            <div class="workout-name">üéä CELEBRATION DAY! ü•≥üèÜ‚ú®</div>
                            <div class="workout-distance">You did it! üåü</div>
                        </div>
                    </div>
                    <div class="week-focus">
                        <div class="focus-label">üéØ Race Strategy</div>
                        <div class="focus-text">Stay calm, stay rested. Start controlled at 5:05/km, settle into rhythm, finish strong. You're ready! üí™</div>
                    </div>
                </div>

            </div>

            <!-- SUMMARY -->
            <div class="summary">
                <h3>üìä Training Summary</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>Duration ‚è±Ô∏è</h4>
                        <p>15 weeks + race week<br>Jan 26 ‚Äì May 16, 2026</p>
                    </div>
                    <div class="summary-item">
                        <h4>Peak Mileage üìà</h4>
                        <p>70-74 km<br>(Week 11: Apr 6‚Äì12)</p>
                    </div>
                    <div class="summary-item">
                        <h4>Longest Run üèÉ</h4>
                        <p>30-32 km with last 10km @ MP<br>(Apr 12, 2026)</p>
                    </div>
                    <div class="summary-item">
                        <h4>Goal Pace üéØ</h4>
                        <p>5:05/km (8:11/mile)<br>Marathon: 3:34:59 üèÜ</p>
                    </div>
                </div>
                <button class="edit-mode-btn" id="editModeBtn">‚úèÔ∏è Edit Workouts</button>
            </div>
        </div>
    </div>
    
    <script>
        // Add interactive elements to all day rows
        function initializeInteractiveElements() {
            const weekCards = document.querySelectorAll('.week-card');
            let dayCounter = 1;
            
            weekCards.forEach((weekCard, weekIndex) => {
                const weekHeader = weekCard.querySelector('.week-header');
                const weekTitle = weekHeader.querySelector('.week-title');
                
                // Load saved collapsed state
                const weekId = `week-${weekIndex}`;
                const isCollapsed = localStorage.getItem(`collapsed-${weekId}`);
                if (isCollapsed === 'false') {
                    weekCard.classList.remove('collapsed');
                }
                
                // Wrap week title and add compliance display and collapse indicator
                const titleWrapper = document.createElement('div');
                titleWrapper.className = 'week-title-wrapper';
                const complianceDisplay = document.createElement('div');
                complianceDisplay.className = 'week-compliance';
                titleWrapper.appendChild(weekTitle.cloneNode(true));
                titleWrapper.appendChild(complianceDisplay);
                weekTitle.replaceWith(titleWrapper);
                
                const collapseIndicator = document.createElement('span');
                collapseIndicator.className = 'collapse-indicator';
                collapseIndicator.textContent = '‚ñº';
                weekHeader.appendChild(collapseIndicator);
                
                // Make header clickable for collapse and save state
                weekHeader.addEventListener('click', function(e) {
                    weekCard.classList.toggle('collapsed');
                    const isNowCollapsed = weekCard.classList.contains('collapsed');
                    localStorage.setItem(`collapsed-${weekId}`, isNowCollapsed);
                });
                
                const daysGrid = weekCard.querySelector('.days-grid');
                if (!daysGrid) return;
                
                const dayRows = daysGrid.querySelectorAll('.day-row');
                
                dayRows.forEach((dayRow) => {
                    const isRestDay = dayRow.classList.contains('rest-day') || 
                                     dayRow.classList.contains('race-day') ||
                                     dayRow.classList.contains('celebration-day');
                    
                    if (isRestDay) {
                        // Just add spacer columns for rest days (4 at start, 1 at end)
                        const spacer1 = document.createElement('div');
                        const spacer2 = document.createElement('div');
                        const spacer3 = document.createElement('div');
                        const spacer4 = document.createElement('div');
                        const spacer5 = document.createElement('div');
                        dayRow.insertBefore(spacer1, dayRow.firstChild);
                        dayRow.insertBefore(spacer2, dayRow.firstChild);
                        dayRow.insertBefore(spacer3, dayRow.firstChild);
                        dayRow.insertBefore(spacer4, dayRow.firstChild);
                        dayRow.appendChild(spacer5);
                        return;
                    }
                    
                    const dayId = `day-${dayCounter}`;
                    dayCounter++;
                    
                    // Wrap in workout-card div
                    const workoutCard = document.createElement('div');
                    workoutCard.className = 'workout-card';
                    dayRow.parentNode.insertBefore(workoutCard, dayRow);
                    
                    // Move day-row into workout-card
                    workoutCard.appendChild(dayRow);
                    
                    // Load saved workout data if exists
                    const savedWorkoutName = localStorage.getItem(`workout-name-${dayId}`);
                    const savedWorkoutDistance = localStorage.getItem(`workout-distance-${dayId}`);
                    
                    const workoutNameEl = dayRow.querySelector('.workout-name');
                    const workoutDistanceEl = dayRow.querySelector('.workout-distance');
                    
                    if (savedWorkoutName) {
                        workoutNameEl.textContent = savedWorkoutName;
                    }
                    if (savedWorkoutDistance) {
                        workoutDistanceEl.textContent = savedWorkoutDistance;
                    }
                    
                    // Store original values as data attributes
                    workoutNameEl.dataset.id = dayId;
                    workoutDistanceEl.dataset.id = dayId;
                    
                    // Create completion checkbox
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.className = 'checkbox';
                    checkbox.dataset.id = dayId;
                    dayRow.insertBefore(checkbox, dayRow.firstChild);
                    
                    // Add "Completed ‚úÖ" label after checkbox
                    const checkboxLabel = document.createElement('span');
                    checkboxLabel.className = 'checkbox-label';
                    checkboxLabel.textContent = 'Completed ‚úÖ';
                    dayRow.insertBefore(checkboxLabel, checkbox.nextSibling);
                    
                    // Create miss button (X)
                    const missBtn = document.createElement('button');
                    missBtn.className = 'miss-btn';
                    missBtn.textContent = '‚úó';
                    missBtn.dataset.id = dayId;
                    dayRow.insertBefore(missBtn, checkboxLabel.nextSibling);
                    
                    // Add "Missed ‚ùå" label after miss button
                    const missBtnLabel = document.createElement('span');
                    missBtnLabel.className = 'miss-btn-label';
                    missBtnLabel.textContent = 'Missed ‚ùå';
                    dayRow.insertBefore(missBtnLabel, missBtn.nextSibling);
                    
                    // Create notes button
                    const notesBtn = document.createElement('button');
                    notesBtn.className = 'notes-btn';
                    notesBtn.textContent = 'üìù Notes';
                    notesBtn.dataset.id = dayId;
                    dayRow.appendChild(notesBtn);
                    
                    // Create notes section
                    const notesSection = document.createElement('div');
                    notesSection.className = 'notes-section';
                    notesSection.dataset.id = dayId;
                    
                    const textarea = document.createElement('textarea');
                    textarea.placeholder = 'Add notes about this workout...';
                    
                    const saveBtn = document.createElement('input');
                    saveBtn.type = 'button';
                    saveBtn.className = 'save-btn';
                    saveBtn.value = 'üíæ Save Note';
                    saveBtn.dataset.id = dayId;
                    
                    notesSection.appendChild(textarea);
                    notesSection.appendChild(saveBtn);
                    workoutCard.appendChild(notesSection);
                    
                    // Create note display
                    const noteDisplay = document.createElement('div');
                    noteDisplay.className = 'note-display';
                    noteDisplay.dataset.noteDisplay = dayId;
                    workoutCard.appendChild(noteDisplay);
                });
            });
        }
        
        // Check week compliance
        function checkWeekCompliance(weekIndex) {
            const weekCards = document.querySelectorAll('.week-card');
            const week = weekCards[weekIndex - 1];
            if (!week) return;
            
            const workoutCards = week.querySelectorAll('.workout-card');
            let totalWorkouts = 0;
            let completedWorkouts = 0;
            
            workoutCards.forEach(card => {
                const dayRow = card.querySelector('.day-row');
                if (!dayRow) return;
                
                const isRest = dayRow.classList.contains('rest-day') ||
                              dayRow.classList.contains('race-day') ||
                              dayRow.classList.contains('celebration-day');
                
                if (isRest) return;
                
                const checkbox = card.querySelector('.checkbox');
                const id = checkbox.dataset.id;
                
                totalWorkouts++;
                
                const isCompleted = localStorage.getItem(`check-${id}`) === 'true';
                
                if (isCompleted) {
                    completedWorkouts++;
                }
            });
            
            const complianceDisplay = week.querySelector('.week-compliance');
            if (complianceDisplay && totalWorkouts > 0) {
                const percentage = Math.round((completedWorkouts / totalWorkouts) * 100);
                complianceDisplay.textContent = `Week Compliance: ${percentage}% (${completedWorkouts}/${totalWorkouts} completed)`;
                
                complianceDisplay.classList.remove('good', 'average', 'poor');
                if (percentage >= 80) {
                    complianceDisplay.classList.add('good');
                } else if (percentage >= 60) {
                    complianceDisplay.classList.add('average');
                } else {
                    complianceDisplay.classList.add('poor');
                }
            }
        }
        
        // Calculate weekly km total
        function calculateWeeklyTotal(weekCard) {
            const distanceElements = weekCard.querySelectorAll('.workout-distance');
            let minTotal = 0;
            let maxTotal = 0;
            
            distanceElements.forEach(el => {
                const text = el.textContent.trim();
                
                // Skip rest days
                if (text === '‚Äî' || text === '') return;
                
                // Extract numbers from text like "10-12 km" or "5 km"
                const numbers = text.match(/(\d+(?:\.\d+)?)/g);
                
                if (numbers && numbers.length > 0) {
                    if (numbers.length === 1) {
                        // Single value like "5 km"
                        const val = parseFloat(numbers[0]);
                        minTotal += val;
                        maxTotal += val;
                    } else if (numbers.length >= 2) {
                        // Range like "10-12 km"
                        minTotal += parseFloat(numbers[0]);
                        maxTotal += parseFloat(numbers[1]);
                    }
                }
            });
            
            // Update the week total display
            const weekTotalEl = weekCard.querySelector('.week-total');
            if (weekTotalEl) {
                if (minTotal === maxTotal) {
                    weekTotalEl.textContent = `${minTotal} km`;
                } else {
                    weekTotalEl.textContent = `${minTotal}-${maxTotal} km`;
                }
            }
        }
        
        // Update all weekly totals
        function updateAllWeeklyTotals() {
            document.querySelectorAll('.week-card').forEach(weekCard => {
                calculateWeeklyTotal(weekCard);
            });
        }
        
        // Find peak mileage week
        function findPeakMileage() {
            let peakMin = 0;
            let peakMax = 0;
            let peakWeekInfo = '';
            
            document.querySelectorAll('.week-card').forEach(weekCard => {
                const distanceElements = weekCard.querySelectorAll('.workout-distance');
                let minTotal = 0;
                let maxTotal = 0;
                
                distanceElements.forEach(el => {
                    const text = el.textContent.trim();
                    if (text === '‚Äî' || text === '') return;
                    
                    const numbers = text.match(/(\d+(?:\.\d+)?)/g);
                    if (numbers && numbers.length > 0) {
                        if (numbers.length === 1) {
                            const val = parseFloat(numbers[0]);
                            minTotal += val;
                            maxTotal += val;
                        } else if (numbers.length >= 2) {
                            minTotal += parseFloat(numbers[0]);
                            maxTotal += parseFloat(numbers[1]);
                        }
                    }
                });
                
                // Check if this week has higher max (or if tied, higher min)
                if (maxTotal > peakMax || (maxTotal === peakMax && minTotal > peakMin)) {
                    peakMin = minTotal;
                    peakMax = maxTotal;
                    const weekTitleEl = weekCard.querySelector('.week-title');
                    if (weekTitleEl) {
                        // Get full week info like "Week 11 | Apr 6 ‚Äì Apr 12"
                        const fullTitle = weekTitleEl.textContent.trim();
                        // Extract week number and dates
                        const match = fullTitle.match(/(Week \d+)\s*\|\s*(.+)/);
                        if (match) {
                            const weekNum = match[1]; // "Week 11"
                            const dates = match[2].trim(); // "Apr 6 ‚Äì Apr 12"
                            peakWeekInfo = `${weekNum}: ${dates}`;
                        } else {
                            peakWeekInfo = fullTitle;
                        }
                    }
                }
            });
            
            return { min: peakMin, max: peakMax, weekInfo: peakWeekInfo };
        }
        
        // Find longest run
        function findLongestRun() {
            let longestMin = 0;
            let longestMax = 0;
            let longestDate = '';
            
            document.querySelectorAll('.day-row.long-run').forEach(dayRow => {
                const distanceEl = dayRow.querySelector('.workout-distance');
                const dateEl = dayRow.querySelector('.day-date');
                
                if (!distanceEl) return;
                
                const text = distanceEl.textContent.trim();
                if (text === '‚Äî' || text === '') return;
                
                const numbers = text.match(/(\d+(?:\.\d+)?)/g);
                if (numbers && numbers.length > 0) {
                    let min, max;
                    if (numbers.length === 1) {
                        min = max = parseFloat(numbers[0]);
                    } else {
                        min = parseFloat(numbers[0]);
                        max = parseFloat(numbers[1]);
                    }
                    
                    // Check if this is the longest (compare max values)
                    if (max > longestMax || (max === longestMax && min > longestMin)) {
                        longestMin = min;
                        longestMax = max;
                        if (dateEl) {
                            longestDate = dateEl.textContent;
                        }
                        
                        // Try to get the year from the week card
                        const weekCard = dayRow.closest('.week-card');
                        if (weekCard) {
                            const weekTitle = weekCard.querySelector('.week-title');
                            if (weekTitle) {
                                const titleText = weekTitle.textContent;
                                // Extract year from title like "Week 11 | Apr 6 ‚Äì Apr 12"
                                const yearMatch = titleText.match(/\d{4}/);
                                if (yearMatch && !longestDate.includes(yearMatch[0])) {
                                    longestDate += `, ${yearMatch[0]}`;
                                }
                            }
                        }
                    }
                }
            });
            
            return { min: longestMin, max: longestMax, date: longestDate };
        }
        
        // Update training summary
        function updateTrainingSummary() {
            // Update peak mileage
            const peakData = findPeakMileage();
            const peakMileageEl = document.querySelector('.summary-item:nth-child(2) p');
            if (peakMileageEl && peakData.max > 0) {
                let peakText;
                if (peakData.min === peakData.max) {
                    peakText = `${peakData.max} km`;
                } else {
                    peakText = `${peakData.min}‚Äì${peakData.max} km`;
                }
                if (peakData.weekInfo) {
                    peakMileageEl.innerHTML = `${peakText}<br>(${peakData.weekInfo})`;
                } else {
                    peakMileageEl.textContent = peakText;
                }
            }
            
            // Update longest run
            const longestData = findLongestRun();
            const longestRunEl = document.querySelector('.summary-item:nth-child(3) p');
            if (longestRunEl && longestData.max > 0) {
                let distanceText;
                if (longestData.min === longestData.max) {
                    distanceText = `${longestData.max} km`;
                } else {
                    distanceText = `${longestData.min}‚Äì${longestData.max} km`;
                }
                
                // Get full workout description
                const longestRunRow = Array.from(document.querySelectorAll('.day-row.long-run')).find(row => {
                    const distEl = row.querySelector('.workout-distance');
                    if (!distEl) return false;
                    const text = distEl.textContent.trim();
                    const numbers = text.match(/(\d+(?:\.\d+)?)/g);
                    if (!numbers) return false;
                    const max = numbers.length > 1 ? parseFloat(numbers[1]) : parseFloat(numbers[0]);
                    return max === longestData.max;
                });
                
                let workoutName = '';
                if (longestRunRow) {
                    const workoutNameEl = longestRunRow.querySelector('.workout-name');
                    if (workoutNameEl) {
                        workoutName = workoutNameEl.textContent.trim();
                    }
                }
                
                if (longestData.date) {
                    longestRunEl.innerHTML = `${distanceText}<br>${workoutName}<br>(${longestData.date})`;
                } else {
                    longestRunEl.innerHTML = `${distanceText}<br>${workoutName}`;
                }
            }
        }
        
        // Initialize tracker
        function initializeTracker() {
            console.log('Initializing tracker...');
            
            // Handle checkboxes for completion
            document.querySelectorAll('.checkbox').forEach(checkbox => {
                const id = checkbox.dataset.id;
                const day = checkbox.closest('.day-row');
                const workoutCard = checkbox.closest('.workout-card');
                const missBtn = day.querySelector('.miss-btn');
                
                // Load saved state
                const isChecked = localStorage.getItem(`check-${id}`) === 'true';
                checkbox.checked = isChecked;
                if (isChecked) {
                    day.classList.add('completed');
                }
                
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        day.classList.add('completed');
                        day.classList.remove('missed');
                        localStorage.setItem(`check-${id}`, 'true');
                        
                        if (missBtn) {
                            missBtn.classList.remove('active');
                            localStorage.setItem(`miss-${id}`, 'false');
                        }
                    } else {
                        day.classList.remove('completed');
                        localStorage.setItem(`check-${id}`, 'false');
                    }
                    
                    // Find which week this belongs to
                    const weekCard = this.closest('.week-card');
                    const weekCards = Array.from(document.querySelectorAll('.week-card'));
                    const weekIndex = weekCards.indexOf(weekCard) + 1;
                    checkWeekCompliance(weekIndex);
                });
            });
            
            // Handle miss buttons
            document.querySelectorAll('.miss-btn').forEach(missBtn => {
                const id = missBtn.dataset.id;
                const day = missBtn.closest('.day-row');
                const checkbox = day.querySelector('.checkbox');
                
                const isMissed = localStorage.getItem(`miss-${id}`) === 'true';
                if (isMissed) {
                    missBtn.classList.add('active');
                    day.classList.add('missed');
                }
                
                missBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    if (this.classList.contains('active')) {
                        // Unmark as missed
                        this.classList.remove('active');
                        day.classList.remove('missed');
                        localStorage.setItem(`miss-${id}`, 'false');
                    } else {
                        // Mark as missed
                        this.classList.add('active');
                        day.classList.add('missed');
                        day.classList.remove('completed');
                        localStorage.setItem(`miss-${id}`, 'true');
                        
                        if (checkbox) {
                            checkbox.checked = false;
                            localStorage.setItem(`check-${id}`, 'false');
                        }
                    }
                    
                    const weekCard = this.closest('.week-card');
                    const weekCards = Array.from(document.querySelectorAll('.week-card'));
                    const weekIndex = weekCards.indexOf(weekCard) + 1;
                    checkWeekCompliance(weekIndex);
                });
            });
            
            // Handle notes buttons
            document.querySelectorAll('.notes-btn').forEach(btn => {
                const id = btn.dataset.id;
                
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const notesSection = document.querySelector(`.notes-section[data-id="${id}"]`);
                    
                    if (notesSection) {
                        document.querySelectorAll('.notes-section').forEach(section => {
                            if (section !== notesSection) {
                                section.classList.remove('active');
                            }
                        });
                        
                        notesSection.classList.toggle('active');
                        
                        if (notesSection.classList.contains('active')) {
                            const textarea = notesSection.querySelector('textarea');
                            if (textarea) {
                                setTimeout(() => textarea.focus(), 200);
                            }
                        }
                    }
                });
            });
            
            // Handle save buttons
            document.querySelectorAll('.save-btn').forEach(btn => {
                const id = btn.dataset.id;
                
                btn.addEventListener('click', function() {
                    const notesSection = document.querySelector(`.notes-section[data-id="${id}"]`);
                    const textarea = notesSection.querySelector('textarea');
                    const text = textarea.value.trim();
                    const notesBtn = document.querySelector(`.notes-btn[data-id="${id}"]`);
                    const noteDisplay = document.querySelector(`[data-note-display="${id}"]`);
                    
                    localStorage.setItem(`note-${id}`, text);
                    
                    if (text) {
                        if (notesBtn) {
                            notesBtn.classList.add('has-note');
                        }
                        if (noteDisplay) {
                            noteDisplay.textContent = `üí¨ ${text}`;
                            noteDisplay.classList.add('visible');
                        }
                    } else {
                        if (notesBtn) {
                            notesBtn.classList.remove('has-note');
                        }
                        if (noteDisplay) {
                            noteDisplay.textContent = '';
                            noteDisplay.classList.remove('visible');
                        }
                    }
                    
                    notesSection.classList.remove('active');
                    
                    const originalText = btn.value;
                    btn.value = '‚úì Saved!';
                    btn.style.background = '#059669';
                    setTimeout(() => {
                        btn.value = originalText;
                        btn.style.background = '';
                    }, 1500);
                });
            });
            
            // Load saved notes
            document.querySelectorAll('.notes-section').forEach(section => {
                const id = section.dataset.id;
                const savedNote = localStorage.getItem(`note-${id}`);
                
                if (savedNote) {
                    const textarea = section.querySelector('textarea');
                    const notesBtn = document.querySelector(`.notes-btn[data-id="${id}"]`);
                    const noteDisplay = document.querySelector(`[data-note-display="${id}"]`);
                    
                    if (textarea) {
                        textarea.value = savedNote;
                    }
                    if (notesBtn) {
                        notesBtn.classList.add('has-note');
                    }
                    if (noteDisplay) {
                        noteDisplay.textContent = `üí¨ ${savedNote}`;
                        noteDisplay.classList.add('visible');
                    }
                }
            });
            
            // Check initial compliance for all weeks
            const weekCards = document.querySelectorAll('.week-card');
            weekCards.forEach((week, index) => {
                checkWeekCompliance(index + 1);
            });
            
            // Calculate initial weekly totals
            updateAllWeeklyTotals();
            
            // Update training summary
            updateTrainingSummary();
            
            console.log('Tracker initialized!');
        }
        
        // Edit mode functionality
        function initializeEditMode() {
            const editBtn = document.getElementById('editModeBtn');
            let editMode = false;
            
            editBtn.addEventListener('click', function() {
                editMode = !editMode;
                document.body.classList.toggle('edit-mode', editMode);
                
                if (editMode) {
                    editBtn.textContent = '‚úÖ Done Editing';
                    editBtn.classList.add('active');
                } else {
                    editBtn.textContent = '‚úèÔ∏è Edit Workouts';
                    editBtn.classList.remove('active');
                }
            });
            
            // Make workout names and distances editable
            document.addEventListener('click', function(e) {
                if (!editMode) return;
                
                const target = e.target;
                if (!target.classList.contains('workout-name') && !target.classList.contains('workout-distance')) return;
                if (target.classList.contains('editing')) return;
                
                const originalText = target.textContent;
                const dayId = target.dataset.id;
                const isName = target.classList.contains('workout-name');
                const storageKey = isName ? `workout-name-${dayId}` : `workout-distance-${dayId}`;
                
                target.classList.add('editing');
                
                const input = document.createElement('input');
                input.type = 'text';
                input.value = originalText;
                
                target.textContent = '';
                target.appendChild(input);
                input.focus();
                input.select();
                
                function finishEdit() {
                    const newValue = input.value.trim() || originalText;
                    target.textContent = newValue;
                    target.classList.remove('editing');
                    
                    // Save to localStorage
                    localStorage.setItem(storageKey, newValue);
                    
                    // Update weekly total if distance was changed
                    if (!isName) {
                        const weekCard = target.closest('.week-card');
                        if (weekCard) {
                            calculateWeeklyTotal(weekCard);
                        }
                        // Update training summary (peak mileage and longest run)
                        updateTrainingSummary();
                    }
                }
                
                input.addEventListener('blur', finishEdit);
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        finishEdit();
                    } else if (e.key === 'Escape') {
                        target.textContent = originalText;
                        target.classList.remove('editing');
                    }
                });
            });
        }
        
        // Initialize everything when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                initializeInteractiveElements();
                setTimeout(initializeTracker, 100);
                initializeEditMode();
            });
        } else {
            initializeInteractiveElements();
            setTimeout(initializeTracker, 100);
            initializeEditMode();
        }
    </script>
</body>
</html>
